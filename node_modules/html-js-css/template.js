#!/usr/bin/env node

const fName = process.argv[2];

const exec = require("child_process").exec;
const fs = require("fs");
const path = require("path");

const TASKS = [createFolder, openFolder, cloneRepo];

function execute(tasks) {
  return tasks.reduce((prev, task) => prev.then(task), Promise.resolve());
}

function createFolder() {
  return Promise.resolve().then(() => {
    fs.mkdir(fName, (err) => {
      if (err) {
        return console.error(err);
      }
      //   console.log("Directory created successfully!");
    });
    console.log("Creating new directory");
  });
}

function openFolder() {
  return Promise.resolve().then(() => {
    try {
      process.chdir(fName);
      console.log("Opening Folder");
    } catch (error) {
      console.log(error);
    }
  });
}

function cloneRepo() {
  return Promise.resolve().then(() => {
    exec("git clone https://github.com/npm-pratik/html-js-css.git .");
    console.log("Cloning repo to directory");
  });
}

execute(TASKS);
// const asyncTasks = async () => {
//   try {
//     await createFolder();
//     await openFolder();
//     await cloneRepo();
//   } catch (err) {
//     console.log(err);
//   }
// };

// asyncTasks();
